<?xml version="1.0" encoding="UTF-8" ?>
<schema name="lm1" version="1.5">
  
   <!-- Recommended fields for Solr -->
   <field name="id" type="string" indexed="true" stored="true" />
   <field name="_version_" type="long" indexed="true" stored="true" />
   
   <!-- Lifemapper fields -->
   <!-- =========================================== -->
   
   <!-- Use this field for performing searches.  It will be useful if split out later -->
   <!--  <field name="searchString" type="text_general" indexed="true" stored="false" />-->
   
   <!--  May not need to store this if it is part of the query... -->
   <field name="userId" type="text_general" indexed="true" stored="true" />
   
   <!-- Occurrence Set -->
   <field name="displayName" type="taxonname" indexed="true" stored="true" />
   <field name="occurrenceSetId" type="int" indexed="true" stored="true" />
   <field name="occurrenceSetMetadataUrl" type="url" indexed="false" stored="true" />
   <field name="occurrenceSetBBox" type="bbox" indexed="true" stored="true" />
   <field name="occurrenceSetModTime" type="datetime" indexed="true" stored="true" />
   <field name="occurrenceSetDownloadUrl" type="url" indexed="false" stored="true" />
   <field name="numberOfOccurrencePoints" type="int" indexed="true" stored="true" />
   <field name="epsgCode" type="int" indexed="true" stored="true" />
   
   <!-- Model -->
   <field name="modelId" type="int" indexed="true" stored="true" />
   <field name="modelMetadataUrl" type="url" indexed="false" stored="true" />
   <field name="modelRulesetUrl" type="url" indexed="false" stored="true" />
   <field name="modelModTime" type="datetime" indexed="true" stored="true" />
   <field name="modelScenarioCode" type="string" indexed="true" stored="true" />
   <field name="modelScenarioId" type="int" indexed="true" stored="true" />
   <field name="modelScenarioUrl" type="url" indexed="false" stored="true" />
   
   <!-- Algorithm -->
   <field name="algorithmCode" type="string" indexed="true" stored="true" />
   <field name="algorithmParameters" type="text_general" indexed="false" stored="true" />
   
   <!-- Projection -->
   <field name="projectionId" type="int" indexed="true" stored="true" />
   <field name="projectionMetadataUrl" type="url" indexed="false" stored="true" />
   <field name="projectionBBox" type="bbox" indexed="true" stored="true" />
   <field name="projectionDownloadUrl" type="url" indexed="false" stored="true" />
   <field name="projectionModTime" type="datetime" indexed="true" stored="true" />
   <field name="projectionScenarioCode" type="string" indexed="true" stored="true" />
   <field name="projectionScenarioId" type="int" indexed="true" stored="true" />
   <field name="projectionScenarioUrl" type="url" indexed="false" stored="true" />
   
      
   <!-- For each PAV cell that is present -->
   <!-- <field name="locs" type="location_rpt" indexed="true" stored="false" />-->
   
   
   <uniqueKey>id</uniqueKey>
   
   
   <!-- Field types -->
   <fieldType name="string" class="solr.StrField" sortMissingLast="true" />
   <fieldType name="int" class="solr.TrieIntField" precisionStep="0" positionIncrementGap="0" />
   <fieldType name="long" class="solr.TrieLongField" precisionStep="0" positionIncrementGap="0" />
   
   <!-- Although not explicity, the bbox field type needs this -->
   <fieldType name="boolean" class="solr.BoolField" omitNorms="true" />
   
   <fieldType name="url" class="solr.StrField" sortMissingLast="true" />
   <fieldType name="taxonname" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
         <!-- <tokenizer class="solr.StandardTokenizerFactory" />-->
         <!-- <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" />-->
         <tokenizer class="solr.EdgeNGramTokenizerFactory" minGramSize="3" maxGramSize="10" />
         <filter class="solr.LowerCaseFilterFactory" />
      </analyzer>
      <analyzer type="query">
         <!-- <tokenizer class="solr.StandardTokenizerFactory" />-->
         <!-- <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" />-->
         <tokenizer class="solr.EdgeNGramTokenizerFactory" minGramSize="3" maxGramSize="10" />
         <filter class="solr.LowerCaseFilterFactory" />
      </analyzer>
   </fieldType>

   <!-- 
   <fieldType name="bbox" class="solr.SpatialRecursivePrefixTreeFieldType"
              spatialContextFactory="com.spatial4j.core.context.jts.JtsSpatialContextFactory"
              geo="true" distErrPct="0.025" maxDistErr="0.0009" distanceUnits="degrees" />
   -->
   <fieldType name="bbox" class="solr.BBoxField" geo="true" 
              distanceUnits="degrees" numberType="_bbox_coord" 
              storeSubFields="false" />
   <fieldType name="_bbox_coord" class="solr.TrieDoubleField" precisionStep="8"
              docValues="true" stored="false" />
   
   <fieldType name="datetime" class="solr.TrieDateField" sortMissingLast="true" omitNorms="true" />
   
   <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
         <tokenizer class="solr.StandardTokenizerFactory" />
         <!-- <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" />-->
         <filter class="solr.LowerCaseFilterFactory" />
      </analyzer>
      <analyzer type="query">
         <tokenizer class="solr.StandardTokenizerFactory" />
         <!-- <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" />-->
         <filter class="solr.LowerCaseFilterFactory" />
      </analyzer>
   </fieldType>

   <fieldType name="location_rpt" class="solr.SpatialRecursivePrefixTreeFieldType"
              spatialContextFactory="com.spatial4j.core.context.jts.JtsSpatialContextFactory"
              geo="true" distErrPct="0.025" maxDistErr="0.000009" distanceUnits="degrees" 
              multiValued="true" />
   
</schema>



  
